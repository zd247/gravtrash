{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/ThanhPhan/Programming/ReactNative/trashgrav-SEPM/ReactNative/screens/HomeScreen.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { render } from \"react-dom\";\nimport BottomBar from \"../components/BottomBar\";\nimport CustomActionButton from \"../components/CustomTempButton\";\nimport ListItem from \"../components/ItemList\";\nimport { snapshotToArray } from \"../helpers/firebaseHelpers\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport colors from \"../assets/colors\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/storage\";\n\nvar HomeScreen = function (_Component) {\n  _inherits(HomeScreen, _Component);\n\n  var _super = _createSuper(HomeScreen);\n\n  function HomeScreen() {\n    var _this;\n\n    _classCallCheck(this, HomeScreen);\n\n    _this = _super.call(this);\n\n    _this.componentDidMount = function _callee() {\n      var user, currentUserData, recycleItems, recycleItemsArray;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              user = _this.props.currentUser;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(firebase.database().ref(\"Users\").child(user.key).once(\"value\"));\n\n            case 3:\n              currentUserData = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(firebase.database().ref(\"Items\").once(\"value\"));\n\n            case 6:\n              recycleItems = _context.sent;\n              recycleItemsArray = snapshotToArray(recycleItems);\n\n              _this.setState({\n                currentUser: currentUserData.val(),\n                recycleItemList: recycleItemsArray\n              });\n\n              _this.props.loadUser(currentUserData.val());\n\n              _this.props.loadRecycleItem(recycleItemsArray);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.showSearchRecycleItem = function () {\n      _this.setState({\n        isSearchRecycleItem: true\n      });\n    };\n\n    _this.hideSearchRecycleItem = function () {\n      _this.setState({\n        isSearchRecycleItem: false\n      });\n    };\n\n    _this.addRecycleItem = function (item) {\n      _this.setState(function (state, props) {\n        return {\n          recycleItemList: [].concat(_toConsumableArray(state.recycleItemList), [item])\n        };\n      }, function () {\n        console.log(_this.state.recycleItemList);\n      });\n    };\n\n    _this.chooseItem = function (selectedItem, index) {\n      var newList = _this.state.recycleItemList.filter(function (recycleItem) {\n        return recycleItem.key == selectedItem.key;\n      });\n\n      _this.props.moveItemToCart(newList[0]);\n    };\n\n    _this.renderRecycleItemList = function (item, index) {\n      return React.createElement(ListItem, {\n        item: item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 5\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          paddingRight: 20\n        },\n        onPress: function onPress() {\n          return _this.chooseItem(item, index);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.addingButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      }, \"Add To Cart\"))));\n    };\n\n    _this.state = {\n      isSearchRecycleItem: false,\n      textInputData: \"\",\n      recycleItemList: [],\n      recycleCart: [],\n      currentUser: {}\n    };\n    return _this;\n  }\n\n  _createClass(HomeScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 7\n        }\n      }, React.createElement(SafeAreaView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.openDrawer();\n        },\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-menu\",\n        size: 30,\n        color: \"white\",\n        style: {\n          marginLeft: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      })), React.createElement(Text, {\n        style: styles.headerTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }\n      }, \"Welcome \", this.props.recycleItemList.user.first_name, \" !!\"), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate(\"CustomerCart\");\n        },\n        style: {\n          marginRight: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-cart\",\n        size: 30,\n        color: \"white\",\n        style: {\n          marginLeft: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.textInputContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }\n      }, React.createElement(TextInput, {\n        style: styles.textInput,\n        placeholder: \"Search Recycle Items\",\n        placeholderTextColor: colors.txtPlaceholder,\n        onChangeText: function onChangeText(text) {\n          return _this2.setState({\n            textInputData: text\n          });\n        },\n        ref: function ref(component) {\n          _this2.textInputRef = component;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }\n      })), React.createElement(FlatList, {\n        data: this.props.recycleItemList.recycleItemList,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return _this2.renderRecycleItemList(item, index);\n        },\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        ListEmptyComponent: React.createElement(View, {\n          style: {\n            marginTop: 50,\n            alignItems: \"center\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontWeight: \"bold\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 17\n          }\n        }, \"No Recycle Item Currently Exist In this List\")),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 0.1,\n          alignItems: \"center\",\n          justifyContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 9\n        }\n      }, React.createElement(CustomActionButton, {\n        style: styles.changeMode,\n        title: \"Book A Driver Now!!\",\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate(\"Home\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: \"100\",\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }\n      }, \"Check Out Now!!\"))), React.createElement(SafeAreaView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return HomeScreen;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    recycleItemList: state.recycleItemList,\n    currentUser: state.auth.currentUser\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    loadRecycleItem: function loadRecycleItem(recycleItemList) {\n      return dispatch({\n        type: \"LOAD_RECYCLE_ITEMS_FROM_SERVER\",\n        payload: recycleItemList\n      });\n    },\n    loadUser: function loadUser(user) {\n      return dispatch({\n        type: \"LOAD_USER_FROM_SERVER\",\n        payload: user\n      });\n    },\n    moveItemToCart: function moveItemToCart(item) {\n      return dispatch({\n        type: \"ADD_RECYCLE_ITEMS_TO_CART\",\n        payload: item\n      });\n    },\n    toggleIsLoadingItems: function toggleIsLoadingItems(bool) {\n      return dispatch({\n        type: \"TOGGLE_IS_LOADING_ITEMS\",\n        payload: bool\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeScreen);\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.bgMain\n  },\n  header: {\n    height: 70,\n    borderBottomWidth: 0.5,\n    borderBottomColor: colors.borderColor,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"row\"\n  },\n  headerTitle: {\n    fontSize: 24,\n    color: \"white\",\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    position: \"absolute\"\n  },\n  textInputContainer: {\n    height: 50,\n    flexDirection: \"row\",\n    margin: 5\n  },\n  textInput: {\n    flex: 1,\n    backgroundColor: \"transparent\",\n    borderColor: colors.listItemBg,\n    borderBottomWidth: 5,\n    fontSize: 22,\n    fontWeight: \"200\",\n    color: \"white\"\n  },\n  checkmarkButton: {\n    backgroundColor: colors.bgSuccess\n  },\n  listEmptyComponent: {\n    marginTop: 50,\n    alignItems: \"center\"\n  },\n  listEmptyComponentText: {\n    fontWeight: \"bold\"\n  },\n  markAsReadButton: {\n    width: 100,\n    backgroundColor: colors.bgSuccess\n  },\n  markAsReadButtonText: {\n    fontWeight: \"bold\",\n    color: \"white\"\n  },\n  footer: {\n    height: 70,\n    flexDirection: \"row\",\n    borderTopWidth: 0.5,\n    borderTopColor: colors.borderColor,\n    color: \"white\"\n  },\n  listItemContainer: {\n    minHeight: 100,\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    alignItems: \"center\"\n  },\n  imageContainer: {\n    height: 70,\n    width: 70,\n    marginLeft: 10\n  },\n  addingButton: {\n    width: 100,\n    height: 50,\n    backgroundColor: \"#a5deba\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  changeMode: {\n    width: 200,\n    height: 50,\n    backgroundColor: \"transparent\",\n    borderWidth: 0.5,\n    borderColor: colors.bgError,\n    marginBottom: 5\n  }\n});","map":{"version":3,"sources":["/Users/ThanhPhan/Programming/ReactNative/trashgrav-SEPM/ReactNative/screens/HomeScreen.js"],"names":["React","Component","render","BottomBar","CustomActionButton","ListItem","snapshotToArray","Ionicons","colors","connect","compose","firebase","HomeScreen","componentDidMount","user","props","currentUser","database","ref","child","key","once","currentUserData","recycleItems","recycleItemsArray","setState","val","recycleItemList","loadUser","loadRecycleItem","showSearchRecycleItem","isSearchRecycleItem","hideSearchRecycleItem","addRecycleItem","item","state","console","log","chooseItem","selectedItem","index","newList","filter","recycleItem","moveItemToCart","renderRecycleItemList","paddingRight","styles","addingButton","textInputData","recycleCart","container","header","navigation","openDrawer","flex","marginLeft","headerTitle","first_name","navigate","marginRight","textInputContainer","textInput","txtPlaceholder","text","component","textInputRef","toString","marginTop","alignItems","fontWeight","justifyContent","changeMode","color","mapStateToProps","auth","mapDispatchToProps","dispatch","type","payload","toggleIsLoadingItems","bool","StyleSheet","create","backgroundColor","bgMain","height","borderBottomWidth","borderBottomColor","borderColor","flexDirection","fontSize","position","margin","listItemBg","checkmarkButton","bgSuccess","listEmptyComponent","listEmptyComponentText","markAsReadButton","width","markAsReadButtonText","footer","borderTopWidth","borderTopColor","listItemContainer","minHeight","imageContainer","borderWidth","bgError","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  SafeAreaView,\n  TouchableOpacity,\n  TextInput,\n  FlatList,\n  Image,\n  Modal,\n} from \"react-native\";\nimport { render } from \"react-dom\";\n\nimport BottomBar from \"../components/BottomBar\";\nimport CustomActionButton from \"../components/CustomTempButton\";\nimport ListItem from \"../components/ItemList\";\nimport { snapshotToArray } from \"../helpers/firebaseHelpers\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport colors from \"../assets/colors\";\n\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\n//import { connectActionSheet } from \"@expo/react-native-action-sheet\";\n\nimport * as firebase from \"firebase/app\";\nimport \"firebase/storage\";\n\nclass HomeScreen extends Component {\n  constructor() {\n    super();\n    this.state = {\n      isSearchRecycleItem: false,\n      textInputData: \"\",\n      recycleItemList: [],\n      recycleCart: [],\n      currentUser: {},\n    };\n  }\n\n  componentDidMount = async () => {\n    const user = this.props.currentUser;\n\n    //const { navigation } = this.props;\n    //const user = navigation.getParam(\"user\");\n\n    const currentUserData = await firebase\n      .database()\n      .ref(\"Users\")\n      .child(user.key)\n      .once(\"value\");\n\n    const recycleItems = await firebase.database().ref(\"Items\").once(\"value\");\n    const recycleItemsArray = snapshotToArray(recycleItems);\n\n    this.setState({\n      currentUser: currentUserData.val(),\n      recycleItemList: recycleItemsArray,\n    });\n\n    this.props.loadUser(currentUserData.val());\n    this.props.loadRecycleItem(recycleItemsArray);\n    //console.log(currentUserData.val());\n    //console.log(this.props.user);\n  };\n\n  showSearchRecycleItem = () => {\n    this.setState({ isSearchRecycleItem: true });\n  };\n\n  hideSearchRecycleItem = () => {\n    this.setState({ isSearchRecycleItem: false });\n  };\n\n  addRecycleItem = (item) => {\n    this.setState(\n      (state, props) => ({\n        recycleItemList: [...state.recycleItemList, item],\n      }),\n      () => {\n        console.log(this.state.recycleItemList);\n      }\n    );\n  };\n\n  chooseItem = (selectedItem, index) => {\n    let newList = this.state.recycleItemList.filter(\n      (recycleItem) => recycleItem.key == selectedItem.key\n    );\n\n    //console.log(newList[0]);\n    //console.log(this.state.recycleItemList)\n    this.props.moveItemToCart(newList[0]);\n    //console.log(this.props.recycleItemList.recycleCart);\n    //console.log(this.props.recycleItemList.recycleCart.length);\n    //console.log(this.props.recycleItemList);\n  };\n\n  renderRecycleItemList = (item, index) => (\n    <ListItem item={item}>\n      <TouchableOpacity\n        style={{ paddingRight: 20 }}\n        onPress={() => this.chooseItem(item, index)}\n      >\n        <View style={styles.addingButton}>\n          <Text>Add To Cart</Text>\n        </View>\n      </TouchableOpacity>\n    </ListItem>\n  );\n\n  render() {\n    return (\n      <View style={styles.container}>\n        <SafeAreaView />\n\n        <View style={styles.header}>\n          <TouchableOpacity\n            onPress={() => this.props.navigation.openDrawer()}\n            style={{ flex: 1 }}\n          >\n            <Ionicons\n              name=\"ios-menu\"\n              size={30}\n              color=\"white\"\n              style={{ marginLeft: 10 }}\n            />\n          </TouchableOpacity>\n          <Text style={styles.headerTitle}>\n            Welcome {this.props.recycleItemList.user.first_name} !!\n          </Text>\n          <TouchableOpacity\n            onPress={() => this.props.navigation.navigate(\"CustomerCart\")}\n            style={{ marginRight: 15 }}\n          >\n            <Ionicons\n              name=\"ios-cart\"\n              size={30}\n              color=\"white\"\n              style={{ marginLeft: 10 }}\n            />\n          </TouchableOpacity>\n        </View>\n\n        <View style={{ flex: 1 }}>\n          <View style={styles.textInputContainer}>\n            <TextInput\n              style={styles.textInput}\n              placeholder=\"Search Recycle Items\"\n              placeholderTextColor={colors.txtPlaceholder}\n              onChangeText={(text) => this.setState({ textInputData: text })}\n              ref={(component) => {\n                this.textInputRef = component;\n              }}\n            />\n          </View>\n          <FlatList\n            data={this.props.recycleItemList.recycleItemList}\n            renderItem={({ item, index }) =>\n              this.renderRecycleItemList(item, index)\n            }\n            keyExtractor={(item, index) => index.toString()}\n            ListEmptyComponent={\n              <View style={{ marginTop: 50, alignItems: \"center\" }}>\n                <Text style={{ fontWeight: \"bold\" }}>\n                  No Recycle Item Currently Exist In this List\n                </Text>\n              </View>\n            }\n          />\n\n          {/*<CustomTempButton\n            position=\"right\"\n            style={{ backgroundColor: \"#CAF1DE\", borderRadius: 25 }}\n            onPress={this.showSearchRecycleItem}\n          >\n            <Text style={{ color: \"white\", fontSize: 30 }}>+</Text>\n          </CustomTempButton> */}\n        </View>\n        <View\n          style={{ flex: 0.1, alignItems: \"center\", justifyContent: \"center\" }}\n        >\n          <CustomActionButton\n            style={styles.changeMode}\n            title=\"Book A Driver Now!!\"\n            onPress={() => this.props.navigation.navigate(\"Home\")}\n          >\n            <Text style={{ fontWeight: \"100\", color: \"white\" }}>\n              Check Out Now!!\n            </Text>\n          </CustomActionButton>\n        </View>\n\n        <SafeAreaView />\n      </View>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    recycleItemList: state.recycleItemList,\n    currentUser: state.auth.currentUser,\n    //temp: state.recycleCart,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    loadRecycleItem: (recycleItemList) =>\n      dispatch({\n        type: \"LOAD_RECYCLE_ITEMS_FROM_SERVER\",\n        payload: recycleItemList,\n      }),\n    loadUser: (user) =>\n      dispatch({\n        type: \"LOAD_USER_FROM_SERVER\",\n        payload: user,\n      }),\n    moveItemToCart: (item) =>\n      dispatch({ type: \"ADD_RECYCLE_ITEMS_TO_CART\", payload: item }),\n    toggleIsLoadingItems: (bool) =>\n      dispatch({ type: \"TOGGLE_IS_LOADING_ITEMS\", payload: bool }),\n  };\n};\n\n//export default connect(mapStateToProps, mapDispatchToProps)(HomeScreen);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeScreen);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.bgMain,\n  },\n  header: {\n    height: 70,\n    borderBottomWidth: 0.5,\n    borderBottomColor: colors.borderColor,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"row\",\n  },\n  headerTitle: {\n    fontSize: 24,\n    color: \"white\",\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    position: \"absolute\",\n  },\n  textInputContainer: {\n    height: 50,\n    flexDirection: \"row\",\n    margin: 5,\n  },\n  textInput: {\n    flex: 1,\n    backgroundColor: \"transparent\",\n    borderColor: colors.listItemBg,\n    borderBottomWidth: 5,\n    fontSize: 22,\n    fontWeight: \"200\",\n    color: \"white\",\n  },\n  checkmarkButton: {\n    backgroundColor: colors.bgSuccess,\n  },\n  listEmptyComponent: {\n    marginTop: 50,\n    alignItems: \"center\",\n  },\n  listEmptyComponentText: {\n    fontWeight: \"bold\",\n  },\n  markAsReadButton: {\n    width: 100,\n    backgroundColor: colors.bgSuccess,\n  },\n  markAsReadButtonText: {\n    fontWeight: \"bold\",\n    color: \"white\",\n  },\n  footer: {\n    height: 70,\n    flexDirection: \"row\",\n    borderTopWidth: 0.5,\n    borderTopColor: colors.borderColor,\n    color: \"white\",\n  },\n  listItemContainer: {\n    minHeight: 100,\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    alignItems: \"center\",\n  },\n  imageContainer: {\n    height: 70,\n    width: 70,\n    marginLeft: 10,\n  },\n  addingButton: {\n    width: 100,\n    height: 50,\n    backgroundColor: \"#a5deba\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  changeMode: {\n    width: 200,\n    height: 50,\n    backgroundColor: \"transparent\",\n    borderWidth: 0.5,\n    borderColor: colors.bgError,\n    marginBottom: 5,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}