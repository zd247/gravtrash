{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/zd/projects/trashgrav-SEPM/ReactNative/screens/UserProfileScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport CustomActionButton from \"../components/CustomTempButton\";\nimport colors from \"../assets/colors\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\nimport { connectActionSheet } from \"@expo/react-native-action-sheet\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createDrawerNavigator, DrawerContentScrollView, DrawerItemList, DrawerItem } from \"@react-navigation/drawer\";\nimport * as ImageHelpers from \"../helpers/imageHelpers\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/storage\";\n\nvar UserProfileScreen = function (_Component) {\n  _inherits(UserProfileScreen, _Component);\n\n  var _super = _createSuper(UserProfileScreen);\n\n  function UserProfileScreen() {\n    var _this;\n\n    _classCallCheck(this, UserProfileScreen);\n\n    _this = _super.call(this);\n\n    _this.componentDidMount = function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                currentUser: _this.props.recycleItemList.user,\n                firstName: _this.props.recycleItemList.user.first_name,\n                lastName: _this.props.recycleItemList.user.last_name,\n                email: _this.props.recycleItemList.user.email,\n                image: _this.props.recycleItemList.user.image,\n                uid: _this.props.recycleItemList.user.uid\n              });\n\n              _this.props.toggleIsLoadingItems(false);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.submit = function _callee2(item) {\n      var tempUser;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              tempUser = [{\n                first_name: _this.state.firstName,\n                last_name: _this.state.lastName,\n                email: _this.state.email,\n                image: _this.props.recycleItemList.user.image,\n                uid: _this.state.uid\n              }];\n              _context2.prev = 1;\n\n              _this.props.toggleIsLoadingItems(true);\n\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(firebase.database().ref(\"Users\").child(_this.props.recycleItemList.user.uid).update({\n                email: _this.state.email,\n                first_name: _this.state.firstName,\n                last_name: _this.state.lastName\n              }));\n\n            case 5:\n              _this.props.updateUser(tempUser[0]);\n\n              console.log(tempUser);\n\n              _this.props.toggleIsLoadingItems(false);\n\n              _context2.next = 14;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(_context2.t0);\n\n              _this.props.toggleIsLoadingItems(false);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[1, 10]], Promise);\n    };\n\n    _this.uploadImage = function _callee3(image) {\n      var ref, blob, snapshot, downloadUrl;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              ref = firebase.storage().ref(\"Profile Pictures\").child(_this.state.currentUser.uid);\n              _context3.prev = 1;\n              _context3.next = 4;\n              return _regeneratorRuntime.awrap(ImageHelpers.prepareBlob(image.uri));\n\n            case 4:\n              blob = _context3.sent;\n              _context3.next = 7;\n              return _regeneratorRuntime.awrap(ref.put(blob));\n\n            case 7:\n              snapshot = _context3.sent;\n              _context3.next = 10;\n              return _regeneratorRuntime.awrap(ref.getDownloadURL());\n\n            case 10:\n              downloadUrl = _context3.sent;\n              _context3.next = 13;\n              return _regeneratorRuntime.awrap(firebase.database().ref(\"Users\").child(_this.state.currentUser.uid).update({\n                image: downloadUrl\n              }));\n\n            case 13:\n              blob.close();\n              return _context3.abrupt(\"return\", downloadUrl);\n\n            case 17:\n              _context3.prev = 17;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(_context3.t0);\n\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, [[1, 17]], Promise);\n    };\n\n    _this.openImageLibrary = function _callee4() {\n      var result, downloadUrl, tempUser;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(ImageHelpers.openImageLibrary());\n\n            case 2:\n              result = _context4.sent;\n\n              if (!result) {\n                _context4.next = 11;\n                break;\n              }\n\n              _this.props.toggleIsLoadingItems(true);\n\n              _context4.next = 7;\n              return _regeneratorRuntime.awrap(_this.uploadImage(result));\n\n            case 7:\n              downloadUrl = _context4.sent;\n              tempUser = [{\n                first_name: _this.state.firstName,\n                last_name: _this.state.lastName,\n                email: _this.state.email,\n                image: downloadUrl,\n                uid: _this.state.uid\n              }];\n\n              _this.props.updateUser(tempUser[0]);\n\n              _this.props.toggleIsLoadingItems(false);\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.openCamera = function _callee5() {\n      var result, downloadUrl, tempUser;\n      return _regeneratorRuntime.async(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return _regeneratorRuntime.awrap(ImageHelpers.openCamera());\n\n            case 2:\n              result = _context5.sent;\n\n              if (!result) {\n                _context5.next = 11;\n                break;\n              }\n\n              _this.props.toggleIsLoadingItems(true);\n\n              _context5.next = 7;\n              return _regeneratorRuntime.awrap(_this.uploadImage(result));\n\n            case 7:\n              downloadUrl = _context5.sent;\n              tempUser = [{\n                first_name: _this.state.firstName,\n                last_name: _this.state.lastName,\n                email: _this.state.email,\n                image: downloadUrl,\n                uid: _this.state.uid\n              }];\n\n              _this.props.updateUser(tempUser[0]);\n\n              _this.props.toggleIsLoadingItems(false);\n\n            case 11:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      phoneNumber: \"\",\n      image: \"\",\n      uid: \"\",\n      currentUser: {}\n    };\n    return _this;\n  }\n\n  _createClass(UserProfileScreen, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      console.log(\"unmount\");\n    }\n  }, {\n    key: \"changePicture\",\n    value: function changePicture() {\n      var _this2 = this;\n\n      var options = [\"Select from Photos\", \"Camera\", \"Cancel\"];\n      var cancelButtonIndex = 2;\n      this.props.showActionSheetWithOptions({\n        options: options,\n        cancelButtonIndex: cancelButtonIndex\n      }, function (buttonIndex) {\n        if (buttonIndex == 0) {\n          _this2.openImageLibrary();\n        } else if (buttonIndex == 1) {\n          _this2.openCamera();\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 7\n        }\n      }, React.createElement(SafeAreaView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.headerTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }\n      }, this.props.recycleItemList.user.first_name, \"'s Profile !!\")), React.createElement(View, {\n        style: styles.imageContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 9\n        }\n      }, this.props.recycleItemList.isLoading && React.createElement(View, {\n        style: _objectSpread({}, StyleSheet.absoluteFill, {\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          zIndex: 1000,\n          elevation: 1000\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        color: colors.logoColor,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        disabled: false,\n        style: {\n          flex: 1\n        },\n        onPress: function onPress() {\n          return _this3.changePicture();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }\n      }, this.props.recycleItemList.user.image ? React.createElement(Image, {\n        source: {\n          uri: this.props.recycleItemList.user.image\n        },\n        style: styles.image,\n        indicatorProps: {\n          size: 40,\n          borderWidth: 0,\n          color: colors.logoColor,\n          unfilledColor: \"rgba(200,200,200,0.2)\"\n        },\n        imageStyle: {\n          borderRadius: 35\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }) : React.createElement(Image, {\n        source: require(\"../assets/icon.png\"),\n        style: styles.image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.textInputContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.prefix,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }\n      }, \"First Name: \"), React.createElement(TextInput, {\n        style: styles.textInput,\n        placeholder: this.state.firstName,\n        placeholderTextColor: \"white\",\n        onBlur: Keyboard.dismiss,\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            firstName: text\n          });\n        },\n        ref: function ref(component) {\n          _this3.textInputRef = component;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 1,\n          paddingBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.prefix,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 15\n        }\n      }, \"Last Name: \"), React.createElement(TextInput, {\n        style: styles.textInput,\n        placeholder: this.state.lastName,\n        placeholderTextColor: \"white\",\n        onBlur: Keyboard.dismiss,\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            lastName: text\n          });\n        },\n        ref: function ref(component) {\n          _this3.textInputRef = component;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 15\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 1,\n          paddingBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.prefix,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 15\n        }\n      }, \"Email: \"), React.createElement(TextInput, {\n        style: styles.textInput,\n        placeholder: this.state.email,\n        placeholderTextColor: \"white\",\n        onBlur: Keyboard.dismiss,\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            email: text\n          });\n        },\n        ref: function ref(component) {\n          _this3.textInputRef = component;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 15\n        }\n      }))), React.createElement(CustomActionButton, {\n        style: [styles.saveChange, {\n          borderColor: colors.bgPrimary\n        }],\n        title: \"Save Change\",\n        onPress: this.submit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: \"200\",\n          color: \"black\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }\n      }, \"Save Change\"))), React.createElement(SafeAreaView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return UserProfileScreen;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.bgMain\n  },\n  header: {\n    height: 70,\n    borderBottomWidth: 0.5,\n    borderBottomColor: colors.borderColor,\n    marginBottom: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  headerTitle: {\n    fontSize: 24,\n    color: \"white\"\n  },\n  textInputContainer: {\n    flex: 1,\n    margin: 5\n  },\n  prefix: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    color: \"white\",\n    fontSize: 22,\n    fontWeight: \"200\",\n    paddingRight: 20,\n    paddingLeft: 20\n  },\n  textInput: {\n    flex: 1,\n    backgroundColor: \"transparent\",\n    borderColor: \"white\",\n    borderWidth: 5,\n    fontSize: 22,\n    fontWeight: \"200\",\n    color: \"white\",\n    paddingRight: 20,\n    paddingLeft: 20\n  },\n  checkmarkButton: {\n    backgroundColor: colors.bgSuccess\n  },\n  listEmptyComponent: {\n    marginTop: 50,\n    alignItems: \"center\"\n  },\n  listEmptyComponentText: {\n    fontWeight: \"bold\"\n  },\n  markAsReadButton: {\n    width: 100,\n    backgroundColor: colors.bgSuccess\n  },\n  markAsReadButtonText: {\n    fontWeight: \"bold\",\n    color: \"white\"\n  },\n  footer: {\n    height: 70,\n    flexDirection: \"row\",\n    borderTopWidth: 0.5,\n    borderTopColor: colors.borderColor,\n    color: \"white\"\n  },\n  listItemContainer: {\n    minHeight: 100,\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    alignItems: \"center\"\n  },\n  imageContainer: {\n    flex: 1,\n    borderColor: \"white\",\n    maxHeight: 150,\n    marginBottom: 50\n  },\n  saveChange: {\n    width: 100,\n    height: 50,\n    backgroundColor: \"#a5deba\",\n    alignSelf: \"center\",\n    justifyContent: \"center\",\n    marginTop: 50\n  },\n  image: {\n    flex: 1,\n    height: null,\n    width: 150,\n    borderRadius: 200,\n    alignSelf: \"center\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    recycleItemList: state.recycleItemList\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateUser: function updateUser(user) {\n      return dispatch({\n        type: \"UPDATE_USER_INFORMATION\",\n        payload: user\n      });\n    },\n    updateImage: function updateImage(image) {\n      return dispatch({\n        type: \"UPDATE_USER_IMAGE\",\n        payload: image\n      });\n    },\n    toggleIsLoadingItems: function toggleIsLoadingItems(bool) {\n      return dispatch({\n        type: \"TOGGLE_IS_LOADING_ITEMS\",\n        payload: bool\n      });\n    }\n  };\n};\n\nvar wrapper = compose(connect(mapStateToProps, mapDispatchToProps), connectActionSheet);\nexport default wrapper(UserProfileScreen);","map":{"version":3,"sources":["/home/zd/projects/trashgrav-SEPM/ReactNative/screens/UserProfileScreen.js"],"names":["React","Component","CustomActionButton","colors","connect","compose","connectActionSheet","NavigationContainer","createDrawerNavigator","DrawerContentScrollView","DrawerItemList","DrawerItem","ImageHelpers","firebase","UserProfileScreen","componentDidMount","setState","currentUser","props","recycleItemList","user","firstName","first_name","lastName","last_name","email","image","uid","toggleIsLoadingItems","submit","item","tempUser","state","database","ref","child","update","updateUser","console","log","uploadImage","storage","prepareBlob","uri","blob","put","snapshot","getDownloadURL","downloadUrl","close","openImageLibrary","result","openCamera","phoneNumber","options","cancelButtonIndex","showActionSheetWithOptions","buttonIndex","styles","container","header","headerTitle","imageContainer","isLoading","StyleSheet","absoluteFill","alignItems","justifyContent","zIndex","elevation","logoColor","flex","changePicture","size","borderWidth","color","unfilledColor","borderRadius","require","textInputContainer","marginBottom","prefix","textInput","Keyboard","dismiss","text","component","textInputRef","paddingBottom","saveChange","borderColor","bgPrimary","fontWeight","create","backgroundColor","bgMain","height","borderBottomWidth","borderBottomColor","fontSize","margin","paddingRight","paddingLeft","checkmarkButton","bgSuccess","listEmptyComponent","marginTop","listEmptyComponentText","markAsReadButton","width","markAsReadButtonText","footer","flexDirection","borderTopWidth","borderTopColor","listItemContainer","minHeight","maxHeight","alignSelf","mapStateToProps","mapDispatchToProps","dispatch","type","payload","updateImage","bool","wrapper"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  SafeAreaView,\n  TouchableOpacity,\n  TextInput,\n  FlatList,\n  Image,\n  Keyboard,\n  ActivityIndicator,\n} from \"react-native\";\n\nimport CustomActionButton from \"../components/CustomTempButton\";\nimport colors from \"../assets/colors\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\nimport { connectActionSheet } from \"@expo/react-native-action-sheet\";\n\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport {\n  createDrawerNavigator,\n  DrawerContentScrollView,\n  DrawerItemList,\n  DrawerItem,\n} from \"@react-navigation/drawer\";\n\nimport * as ImageHelpers from \"../helpers/imageHelpers\";\nimport * as firebase from \"firebase/app\";\nimport \"firebase/storage\";\n\nclass UserProfileScreen extends Component {\n  constructor() {\n    super();\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      phoneNumber: \"\",\n      image: \"\",\n      uid: \"\",\n      currentUser: {},\n    };\n  }\n\n  componentDidMount = async () => {\n    this.setState({\n      currentUser: this.props.recycleItemList.user,\n      firstName: this.props.recycleItemList.user.first_name,\n      lastName: this.props.recycleItemList.user.last_name,\n      email: this.props.recycleItemList.user.email,\n      image: this.props.recycleItemList.user.image,\n      uid: this.props.recycleItemList.user.uid,\n    });\n    this.props.toggleIsLoadingItems(false);\n  };\n\n  componentWillUnmount() {\n    console.log(\"unmount\");\n  }\n\n  submit = async (item) => {\n    const tempUser = [\n      {\n        first_name: this.state.firstName,\n        last_name: this.state.lastName,\n        email: this.state.email,\n        image: this.props.recycleItemList.user.image,\n        uid: this.state.uid,\n      },\n    ];\n\n    try {\n      this.props.toggleIsLoadingItems(true);\n      await firebase\n        .database()\n        .ref(\"Users\")\n        .child(this.props.recycleItemList.user.uid)\n        .update({\n          email: this.state.email,\n          first_name: this.state.firstName,\n          last_name: this.state.lastName,\n        });\n\n      this.props.updateUser(tempUser[0]);\n      console.log(tempUser);\n      this.props.toggleIsLoadingItems(false);\n    } catch (error) {\n      console.log(error);\n      this.props.toggleIsLoadingItems(false);\n    }\n  };\n\n  uploadImage = async (image) => {\n    const ref = firebase\n      .storage()\n      .ref(\"Profile Pictures\")\n      .child(this.state.currentUser.uid);\n\n    try {\n      //converting to blob\n      const blob = await ImageHelpers.prepareBlob(image.uri);\n      const snapshot = await ref.put(blob);\n\n      let downloadUrl = await ref.getDownloadURL();\n\n      await firebase\n        .database()\n        .ref(\"Users\")\n        .child(this.state.currentUser.uid)\n        .update({ image: downloadUrl });\n\n      blob.close();\n\n      return downloadUrl;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  openImageLibrary = async () => {\n    const result = await ImageHelpers.openImageLibrary();\n\n    if (result) {\n      this.props.toggleIsLoadingItems(true);\n      const downloadUrl = await this.uploadImage(result);\n\n      const tempUser = [\n        {\n          first_name: this.state.firstName,\n          last_name: this.state.lastName,\n          email: this.state.email,\n          image: downloadUrl,\n          uid: this.state.uid,\n        },\n      ];\n\n      this.props.updateUser(tempUser[0]);\n      //this.props.updateImage({ uri: downloadUrl });\n      //this.state.image = downloadUrl;\n      this.props.toggleIsLoadingItems(false);\n    }\n  };\n\n  openCamera = async () => {\n    const result = await ImageHelpers.openCamera();\n\n    if (result) {\n      this.props.toggleIsLoadingItems(true);\n      const downloadUrl = await this.uploadImage(result);\n\n      const tempUser = [\n        {\n          first_name: this.state.firstName,\n          last_name: this.state.lastName,\n          email: this.state.email,\n          image: downloadUrl,\n          uid: this.state.uid,\n        },\n      ];\n\n      this.props.updateUser(tempUser[0]);\n      //this.props.updateImage({ uri: downloadUrl });\n      //this.state.image = downloadUrl;\n      this.props.toggleIsLoadingItems(false);\n    }\n  };\n\n  changePicture() {\n    const options = [\"Select from Photos\", \"Camera\", \"Cancel\"];\n    const cancelButtonIndex = 2;\n\n    this.props.showActionSheetWithOptions(\n      {\n        options,\n        cancelButtonIndex,\n      },\n      (buttonIndex) => {\n        // Do something here depending on the button index selected\n        if (buttonIndex == 0) {\n          this.openImageLibrary();\n        } else if (buttonIndex == 1) {\n          this.openCamera();\n        }\n      }\n    );\n  }\n\n  render() {\n    return (\n      <View style={styles.container}>\n        <SafeAreaView />\n\n        <View style={styles.header}>\n          <Text style={styles.headerTitle}>\n            {this.props.recycleItemList.user.first_name}'s Profile !!\n          </Text>\n        </View>\n        <View style={styles.imageContainer}>\n          {this.props.recycleItemList.isLoading && (\n            <View\n              style={{\n                ...StyleSheet.absoluteFill,\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                zIndex: 1000,\n                elevation: 1000,\n              }}\n            >\n              <ActivityIndicator size=\"large\" color={colors.logoColor} />\n            </View>\n          )}\n          <TouchableOpacity\n            disabled={false}\n            style={{ flex: 1 }}\n            onPress={() => this.changePicture()}\n          >\n            {this.props.recycleItemList.user.image ? (\n              <Image\n                source={{ uri: this.props.recycleItemList.user.image }}\n                style={styles.image}\n                // indicator={ProgressPie}\n                indicatorProps={{\n                  size: 40,\n                  borderWidth: 0,\n                  color: colors.logoColor,\n                  unfilledColor: \"rgba(200,200,200,0.2)\",\n                }}\n                imageStyle={{ borderRadius: 35 }}\n              />\n            ) : (\n              <Image\n                source={require(\"../assets/icon.png\")}\n                style={styles.image}\n              />\n            )}\n          </TouchableOpacity>\n        </View>\n        <View style={{ flex: 1 }}>\n          <View style={styles.textInputContainer}>\n            <View\n              style={{\n                flex: 1,\n                //flexDirection: \"row\",\n                marginBottom: 20,\n              }}\n            >\n              <Text style={styles.prefix}>First Name: </Text>\n              <TextInput\n                style={styles.textInput}\n                placeholder={this.state.firstName}\n                placeholderTextColor={\"white\"}\n                onBlur={Keyboard.dismiss}\n                onChangeText={(text) => this.setState({ firstName: text })}\n                ref={(component) => {\n                  this.textInputRef = component;\n                }}\n              />\n            </View>\n            <View style={{ flex: 1, paddingBottom: 20 }}>\n              <Text style={styles.prefix}>Last Name: </Text>\n              <TextInput\n                style={styles.textInput}\n                placeholder={this.state.lastName}\n                placeholderTextColor={\"white\"}\n                onBlur={Keyboard.dismiss}\n                onChangeText={(text) => this.setState({ lastName: text })}\n                ref={(component) => {\n                  this.textInputRef = component;\n                }}\n              />\n            </View>\n            <View style={{ flex: 1, paddingBottom: 20 }}>\n              <Text style={styles.prefix}>Email: </Text>\n              <TextInput\n                style={styles.textInput}\n                placeholder={this.state.email}\n                placeholderTextColor={\"white\"}\n                onBlur={Keyboard.dismiss}\n                onChangeText={(text) => this.setState({ email: text })}\n                ref={(component) => {\n                  this.textInputRef = component;\n                }}\n              />\n            </View>\n          </View>\n          <CustomActionButton\n            style={[styles.saveChange, { borderColor: colors.bgPrimary }]}\n            title=\"Save Change\"\n            onPress={this.submit}\n          >\n            <Text style={{ fontWeight: \"200\", color: \"black\" }}>\n              Save Change\n            </Text>\n          </CustomActionButton>\n        </View>\n\n        <SafeAreaView />\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.bgMain,\n  },\n  header: {\n    height: 70,\n    borderBottomWidth: 0.5,\n    borderBottomColor: colors.borderColor,\n    marginBottom: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  headerTitle: {\n    fontSize: 24,\n    color: \"white\",\n  },\n  textInputContainer: {\n    //flexDirection: \"row\",\n    flex: 1,\n    margin: 5,\n  },\n  prefix: {\n    flex: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    color: \"white\",\n    //backgroundColor: \"red\",\n    fontSize: 22,\n    fontWeight: \"200\",\n    paddingRight: 20,\n    paddingLeft: 20,\n    //paddingTop: 10,\n  },\n  textInput: {\n    flex: 1,\n    backgroundColor: \"transparent\",\n    borderColor: \"white\",\n    borderWidth: 5,\n    fontSize: 22,\n    fontWeight: \"200\",\n    color: \"white\",\n    paddingRight: 20,\n    paddingLeft: 20,\n  },\n  checkmarkButton: {\n    backgroundColor: colors.bgSuccess,\n  },\n  listEmptyComponent: {\n    marginTop: 50,\n    alignItems: \"center\",\n  },\n  listEmptyComponentText: {\n    fontWeight: \"bold\",\n  },\n  markAsReadButton: {\n    width: 100,\n    backgroundColor: colors.bgSuccess,\n  },\n  markAsReadButtonText: {\n    fontWeight: \"bold\",\n    color: \"white\",\n  },\n  footer: {\n    height: 70,\n    flexDirection: \"row\",\n    borderTopWidth: 0.5,\n    borderTopColor: colors.borderColor,\n    color: \"white\",\n  },\n  listItemContainer: {\n    minHeight: 100,\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    alignItems: \"center\",\n  },\n  imageContainer: {\n    flex: 1,\n    borderColor: \"white\",\n    maxHeight: 150,\n    marginBottom: 50,\n  },\n  saveChange: {\n    width: 100,\n    height: 50,\n    backgroundColor: \"#a5deba\",\n    alignSelf: \"center\",\n    justifyContent: \"center\",\n    marginTop: 50,\n  },\n  image: {\n    flex: 1,\n    height: null,\n    width: 150,\n    borderRadius: 200,\n    alignSelf: \"center\",\n  },\n});\n\nconst mapStateToProps = (state) => {\n  return {\n    recycleItemList: state.recycleItemList,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updateUser: (user) =>\n      dispatch({\n        type: \"UPDATE_USER_INFORMATION\",\n        payload: user,\n      }),\n    updateImage: (image) =>\n      dispatch({ type: \"UPDATE_USER_IMAGE\", payload: image }),\n    toggleIsLoadingItems: (bool) =>\n      dispatch({ type: \"TOGGLE_IS_LOADING_ITEMS\", payload: bool }),\n  };\n};\n\nconst wrapper = compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  connectActionSheet\n);\n\nexport default wrapper(UserProfileScreen);\n"]},"metadata":{},"sourceType":"module"}